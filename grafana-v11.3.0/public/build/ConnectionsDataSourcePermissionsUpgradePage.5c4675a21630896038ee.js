"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4004],{42932:(C,D,e)=>{e.r(D),e.d(D,{DataSourcePermissionsUpgradePage:()=>E,default:()=>M});var l=e(74848),o=e(54148),c=e(21780),r=e(31152),a=e(6019);const E=()=>{const{uid:_=""}=(0,o.g)(),{navId:O,pageNav:g}=(0,r.n)("permissions");return(0,l.jsx)(c.YW,{navId:O,pageNav:g,children:(0,l.jsx)(c.YW.Contents,{children:(0,l.jsx)(a.Ay,{uid:_})})})},M=E},6019:(C,D,e)=>{e.d(D,{Ay:()=>M});var l=e(74848),o=e(40845),c=e(77454),r=e(85464);const a=({uid:_})=>((0,r.oU)(_),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Iz,{featureName:"data source permissions",featureId:"data-source-permissions"}),(0,l.jsx)(E,{})]})),E=({action:_})=>{const O=(0,o.$j)();return(0,l.jsx)(c.El,{action:_,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users\u2019 experience by hiding data sources they don\u2019t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${O.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},M=a},31152:(C,D,e)=>{e.d(D,{n:()=>_});var l=e(24180),o=e(19347),c=e(17422),r=e(11084),a=e(74984),E=e(83391),M=e(31678);function _(O){const{uid:g}=(0,l.g)(),L=(0,l.zy)(),m=(0,r.xw)(g),A=(0,r.S4)(m.type),x=(0,E.ob)(m.type),W=new URLSearchParams(L.search),v=O||W.get("page"),{plugin:P,loadError:S,loading:T}=(0,r._e)(),U=(0,o.l)()?.getInstanceSettings(g),B=!!(U?.meta?.alerting??!1),y=U?.type==="alertmanager",K=B||y,R=(0,M.useSelector)(i=>i.navIndex),I=v?`datasource-${v}-${g}`:`datasource-settings-${g}`;let n={node:{text:"Data Source Nav Node"},main:{text:"Data Source Nav Node"}};if(S){const i={text:S,subTitle:"Data Source Error",icon:"exclamation-triangle"};n={node:i,main:i}}return(T||!P)&&(n=(0,c.tc)(R,I,(0,a.$m)("settings"))),P&&(n=(0,c.tc)(R,I,(0,a.Vh)((0,a.R4)(m,P),v||"settings"))),{navId:"connections-datasources",pageNav:{...n.main,dataSourcePluginName:x?.name||P?.meta.name||"",active:!0,text:m.name,subTitle:`Type: ${A.name}`,children:(n.main.children||[]).map(i=>({...i,url:i.url?.replace("datasources/edit/","/connections/datasources/edit/")}))},dataSourceHeader:{alertingSupported:K}}}},458:(C,D,e)=>{e.d(D,{C:()=>c});var l=e(96540),o=e(83883);const c=(0,l.createContext)(o.I)},11084:(C,D,e)=>{e.d(D,{$k:()=>T,BY:()=>A,S4:()=>y,Tn:()=>B,US:()=>x,Um:()=>P,_e:()=>K,aM:()=>I,hx:()=>v,k9:()=>S,oU:()=>m,u1:()=>R,xw:()=>U});var l=e(96540),o=e(97007),c=e(28138),r=e(10096),a=e(31678),E=e(28444),M=e(11959),_=e(34258),O=e(458),g=e(36227),L=e(54226);const m=n=>{const u=(0,a.useDispatch)();(0,l.useEffect)(()=>(u((0,_.PK)(n)),function(){u((0,o.N)({cleanupAction:f=>f.dataSourceSettings=g.IJ}))}),[n,u])},A=n=>{const u=(0,a.useDispatch)(),i=I();return()=>u((0,_.Ge)(n,i.Edit))},x=()=>{const n=(0,a.useDispatch)(),u=(0,a.useSelector)(f=>f.dataSources.isLoadingDataSources),i=(0,a.useSelector)(f=>f.dataSources.dataSources);return(0,l.useEffect)(()=>{n((0,_.bn)())},[n]),{isLoading:u,dataSources:i}},W=n=>{const u=useDispatch();useEffect(()=>{u(loadDataSource(n))},[u,n])},v=()=>{const n=(0,a.useDispatch)();(0,l.useEffect)(()=>{n((0,_.G2)())},[n])},P=()=>{const n=(0,a.useDispatch)(),u=I();return i=>{n((0,_.du)(i,u.Edit))}},S=()=>{const n=(0,a.useDispatch)();return async u=>n((0,_.jB)(u))},T=()=>{const n=(0,a.useDispatch)(),{name:u}=(0,a.useSelector)(i=>i.dataSources.dataSource);return()=>{c.A.publish(new E.bY({title:"Delete",text:`Are you sure you want to delete the "${u}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>n((0,_.Qq)())}))}},U=n=>(0,a.useSelector)(u=>(0,L.U4)(u.dataSources,n)),B=n=>{const u=U(n);return(0,M.h)(u)},y=n=>(0,a.useSelector)(u=>(0,L.Fj)(u.dataSources,n)),K=()=>(0,a.useSelector)(n=>n.dataSourceSettings),R=n=>{const u=U(n),i=u.readOnly===!0,f=r.TP.hasPermissionInMetadata(a.AccessControlAction.DataSourcesWrite,u),N=r.TP.hasPermissionInMetadata(a.AccessControlAction.DataSourcesDelete,u);return{readOnly:i,hasWriteRights:f,hasDeleteRights:N}},I=()=>(0,l.useContext)(O.C)},85464:(C,D,e)=>{e.d(D,{$k:()=>c.$k,$m:()=>r.$m,BY:()=>c.BY,Bs:()=>a.Bs,CR:()=>o.C,C_:()=>a.C_,S4:()=>c.S4,Tk:()=>a.Tk,Tn:()=>c.Tn,US:()=>c.US,Um:()=>c.Um,_e:()=>c._e,aM:()=>c.aM,du:()=>l.du,eB:()=>a.eB,hp:()=>E.hp,hx:()=>c.hx,jz:()=>a.jz,k9:()=>c.k9,lv:()=>E.lv,oU:()=>c.oU,rb:()=>a.rb,u1:()=>c.u1,wC:()=>E.wC,xs:()=>E.xs,xw:()=>c.xw,zC:()=>E.zC});var l=e(34258),o=e(458),c=e(11084),r=e(74984),a=e(36227),E=e(54226)},11959:(C,D,e)=>{e.d(D,{h:()=>c});var l=e(76885),o=e(71733);const c=r=>{const a=JSON.stringify({datasource:r.name,context:"explore"});return l.kM.renderUrl(o.I.assureBaseUrl("/explore"),{left:a})}},83391:(C,D,e)=>{e.d(D,{A5:()=>X,wr:()=>z,m5:()=>N,PW:()=>U,F9:()=>R,ob:()=>y,sM:()=>B,xX:()=>I,XN:()=>$,pw:()=>i,Gp:()=>u,qG:()=>G,SQ:()=>n});var l=e(96540),o=e(31678),c=e(5129),r=e(20701),a=e(25508),E=e(54479),M=e(14110),_=e(66253),O=e(31326);const g=t=>t.plugins,L=(0,a.Mz)(g,({items:t})=>t),{selectAll:m,selectById:A}=O.AI.getSelectors(L),x=t=>(0,a.Mz)(m,s=>{const d=t.keyword?(0,E.xb)(t.keyword.toLowerCase()):"",p=d!==""?(0,c.TD)(s,d):null;return d&&(0,M.rR)("plugins_search",{resultsCount:p?.length}),s.filter(h=>!(d&&p==null||d&&!p?.includes(h.id)||t.type&&h.type!==t.type||t.isInstalled!==void 0&&h.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&h.isEnterprise!==t.isEnterprise||t.hasUpdate!==void 0&&(h.hasUpdate!==t.hasUpdate||!(0,c.R7)(h))))}),W=t=>(0,a.Mz)(m,s=>{const d=[];for(const p of s)p.error&&(!t||p.type===t)&&d.push({pluginId:p.id,errorCode:p.error,pluginType:p.type});return d}),v=t=>(0,a.Mz)(g,({requests:s={}})=>s[t]),P=t=>(0,a.Mz)(v(t),s=>s?.status===_.IZ.Pending),S=t=>(0,a.Mz)(v(t),s=>s?.status===_.IZ.Rejected?s?.error:null),T=t=>(0,a.Mz)(v(t),s=>s===void 0),U=(t,s=c.by.nameAsc)=>{j();const d=(0,l.useMemo)(()=>x(t),[t]),p=(0,o.useSelector)(d),{isLoading:h,error:F}=f(),Q=(0,c.Xc)(p,s);return{isLoading:h,error:F,plugins:Q}},B=()=>{const{isLoading:t}=N(),{plugins:s}=U({isInstalled:!0}),d=s.filter(c.R7);return{isLoading:t,updatablePlugins:d}},y=t=>(j(),Y(t),(0,o.useSelector)(s=>A(s,t))),K=t=>(J(),useSelector(s=>selectById(s,t))),R=t=>(j(),(0,o.useSelector)(W(t))),I=()=>{const t=(0,o.useDispatch)();return(s,d,p)=>t((0,r.ai)({id:s,version:d,isUpdating:p}))},n=()=>{const t=(0,o.useDispatch)();return()=>t((0,r.nT)())},u=()=>{const t=(0,o.useDispatch)();return s=>t((0,r.JC)(s))},i=()=>(0,o.useSelector)(S(r.JJ.typePrefix))===null,f=()=>{const t=(0,o.useSelector)(P("plugins/fetchLocal")),s=(0,o.useSelector)(S("plugins/fetchLocal"));return{isLoading:t,error:s}},N=()=>{const t=(0,o.useSelector)(P(r.mj.typePrefix)),s=(0,o.useSelector)(P("plugins/fetchLocal")),d=(0,o.useSelector)(P("plugins/fetchRemote")),p=t||s||d,h=(0,o.useSelector)(S(r.mj.typePrefix));return{isLoading:p,error:h}},z=()=>{const t=(0,o.useSelector)(P(r.t5.typePrefix)),s=(0,o.useSelector)(S(r.t5.typePrefix));return{isLoading:t,error:s}},$=()=>{const t=(0,o.useSelector)(P(r.ai.typePrefix)),s=(0,o.useSelector)(S(r.ai.typePrefix));return{isInstalling:t,error:s}},G=()=>{const t=(0,o.useSelector)(P(r.JC.typePrefix)),s=(0,o.useSelector)(S(r.JC.typePrefix));return{isUninstalling:t,error:s}},j=()=>{const t=(0,o.useDispatch)(),s=(0,o.useSelector)(T(r.mj.typePrefix));(0,l.useEffect)(()=>{s&&t((0,r.mj)())},[])},J=()=>{const t=useDispatch(),s=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{s&&t(fetchAllLocal())},[])},Y=t=>{const s=(0,o.useDispatch)(),d=(0,o.useSelector)(F=>A(F,t)),h=!(0,o.useSelector)(P(r.t5.typePrefix))&&d&&!d.details;(0,l.useEffect)(()=>{h&&s((0,r.t5)(t))},[d])},X=()=>{const t=(0,o.useDispatch)();return s=>t((0,r.t5)(s))}}}]);

//# sourceMappingURL=ConnectionsDataSourcePermissionsUpgradePage.5c4675a21630896038ee.js.map