"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[94],{30249:(at,Z,i)=>{i.d(Z,{o:()=>h});var O=i(74848),S=i(96540),B=i(85200),R=i(1173),w=i(11261),F=i(90708),J=i(67266),W=i(81297),V=i(16895),d=i(40458);function g(e,o,a=[]){for(const s of a)if(typeof s=="function"){if(!s(e,o))return!1}else if(o[s]!==e[s])return!1;return!0}const P={x:B.sJ.get(R.Ct.firstTimeField).get({}),y:B.sJ.get(R.Ct.byTypes).get(new Set([w.PU.number,w.PU.enum]))};class h extends S.Component{constructor(o){super(o),this.getTimeRange=()=>this.props.timeRange;let a=this.prepState(o);a.alignedData=a.config.prepData([a.alignedFrame]),this.state=a,this.plotInstance=S.createRef()}prepState(o,a=!0){let s=null;const{frames:f,fields:r=P,preparePlotFrame:M,replaceVariables:H,dataLinkPostProcessor:v}=o,X=M??d.m,C=f.some(Y=>Y.fields.some(G=>(G.config.links?.length??0)>0)),L=X(f,{...r,y:C?()=>!0:r.y},o.timeRange);if((0,V.uY)("GraphNG",!1,"data aligned",L),L){let Y=L;if(C){const c=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let l=f.map((u,E)=>({...u,fields:L.fields.filter((y,U)=>U===0||y.state?.origin?.frameIndex===E),length:L.length}));l.forEach((u,E)=>{u.fields.forEach(y=>{y.getLinks=(0,F._M)(u,y,{...y.state?.scopedVars,__dataContext:{value:{data:l,field:y,frame:u,frameIndex:E}}},H,c,v)})}),Y={...L,fields:L.fields.filter((u,E)=>E===0||r.y(u,L,[L]))}}let G=this.state?.config;a&&(G=o.prepConfig(Y,this.props.frames,this.getTimeRange),(0,V.uY)("GraphNG",!1,"config prepared",G)),s={alignedFrame:Y,config:G},(0,V.uY)("GraphNG",!1,"data prepared",s.alignedData)}return s}componentDidUpdate(o){const{frames:a,structureRev:s,timeZone:f,cursorSync:r,propsToDiff:M}=this.props,H=!g(o,this.props,M);if(a!==o.frames||H||f!==o.timeZone||r!==o.cursorSync){let v=this.prepState(this.props,!1);v&&((this.state.config===void 0||f!==o.timeZone||r!==o.cursorSync||s!==o.structureRev||!s||H)&&(v.config=this.props.prepConfig(v.alignedFrame,this.props.frames,this.getTimeRange),(0,V.uY)("GraphNG",!1,"config recreated",v.config)),v.alignedData=v.config.prepData([v.alignedFrame]),this.setState(v))}}render(){const{width:o,height:a,children:s,renderLegend:f}=this.props,{config:r,alignedFrame:M,alignedData:H}=this.state;return r?(0,O.jsx)(J.KU,{width:o,height:a,legend:f(r),children:(v,X)=>(0,O.jsx)(W.Z,{config:r,data:H,width:v,height:X,plotRef:C=>this.plotInstance.current=C,children:s?s(r,M):null})}):null}}},40458:(at,Z,i)=>{i.d(Z,{m:()=>V});var O=i(11261),S=i(73060),B=i(46294);function R(d,g,P){let h,e;for(let o=0;o<g.length;o++)if(g[o]==null)e==null&&h!=null&&(e=o);else{if(e!=null&&h!=null){if(d[o]-h<P)for(;e<o;)g[e++]=void 0;e=null}h=d[o]}return g}var w=i(52622);function F(d){return d.type===O.PU.number&&d.config.custom?.drawStyle===w.GR.Bars&&!d.config.custom?.hideFrom?.viz}function J(d,g){return d.fields.find(P=>g!=null?P.name===g:P.type===O.PU.time)}function W(d,g){const P=J(d,g);let h=P?.values;for(let e=0;e<d.fields.length;e++){let o=d.fields[e];if(o===P||F(o))continue;let a=o.config.custom?.spanNulls;typeof a=="number"&&a!==-1&&h&&(o.values=R(h,o.values,a))}return d}function V(d,g,P){let h;t:for(let s of d)for(let f of s.fields)if(g.x(f,s,d)){h=f;break t}d=d.map(s=>h?.state?.nullThresholdApplied?s:(0,B.M)({frame:s,refFieldName:h.name,refFieldPseudoMin:P?.from.valueOf(),refFieldPseudoMax:P?.to.valueOf()}));let e=d.reduce((s,f)=>s+f.fields.reduce((r,M)=>r+(F(M)?1:0),0),0),o=1/0;e>1&&d.forEach(s=>{if(!s.fields.some(F))return;const f=h.values;for(let r=0;r<f.length;r++)r>0&&(o=Math.min(o,f[r]-f[r-1]))});let a=(0,S.Fd)({frames:d,joinBy:g.x,keep:g.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:s=>{if(F(s))return S.WO;let f=s.config.custom?.spanNulls;return f===!0?S.RC:f===-1?S.WO:S.JI}});return a?(a=W(a,h.name),o!==1/0&&(a.fields.forEach((s,f)=>{let r=s.values;if(f===0){let M=r[r.length-1];r.push(M+o,M+2*o)}else F(s)?r.push(null,null):r.push(void 0,void 0)}),a.length+=2),a):null}},95168:(at,Z,i)=>{i.d(Z,{Z:()=>G});var O=i(74848),S=i(96540),B=i(24182),R=i(40845),w=i(30249),F=i(2543),J=i(36613),W=i(11261),V=i(83195),d=i(57875),g=i(8066),P=i(24293),h=i(28240),e=i(52622),o=i(51336),a=i(74863),s=i(55129),f=i(16895);const r=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),M=Array(53);for(let c=0;c<M.length;c++)M[c]=2**c;const H=(c,l=1)=>c==null?"-":c.toFixed(l),v={drawStyle:e.GR.Line,showPoints:e.yL.Auto,axisPlacement:e.vM.Auto},X=({frame:c,theme:l,timeZones:u,getTimeRange:E,allFrames:y,renderers:U,tweakScale:$=_=>_,tweakAxis:ct=_=>_,hoverProximity:nt,orientation:ut=e.wV.Horizontal})=>{const _=ut!==e.wV.Vertical,T=new o.e(u[0]);let mt;T.setPrepData(p=>(mt=p[0],(0,f.bq)(p[0],T.getStackingGroups())));const N=c.fields[0];if(!N)return T;const rt="x";let pt="";const xt=N.config.custom?.axisPlacement===e.vM.Hidden?e.vM.Hidden:_?e.vM.Bottom:e.vM.Left,yt=N.config.custom?.axisPlacement!==e.vM.Hidden;if(N.type===W.PU.time){T.addScale({scaleKey:rt,orientation:_?e.Lt.Horizontal:e.Lt.Vertical,direction:_?e.ON.Right:e.ON.Up,isTime:!0,range:()=>{const t=E();return[t.from.valueOf(),t.to.valueOf()]}});const p=u.length>1?(t,m)=>_?m.map((n,k)=>k<2?null:n):m:void 0;for(let t=0;t<u.length;t++){const m=u[t];T.addAxis({scaleKey:rt,isTime:!0,placement:xt,show:yt,label:N.config.custom?.axisLabel,timeZone:m,theme:l,grid:{show:t===0&&N.config.custom?.axisGridShow},filter:p})}u.length>1&&T.addHook("drawAxes",t=>{t.ctx.save();let m=0;t.axes.forEach(n=>{if(_&&n.side===2){t.ctx.fillStyle=l.colors.text.primary,t.ctx.textAlign="left",t.ctx.textBaseline="bottom";let k=n._pos+n._size;t.ctx.fillText(u[m],t.bbox.left,k*J.A.pxRatio),m++}}),t.ctx.restore()})}else T.addScale({scaleKey:rt,orientation:_?e.Lt.Horizontal:e.Lt.Vertical,direction:_?e.ON.Right:e.ON.Up,range:(p,t,m)=>[N.config.min??t,N.config.max??m]}),T.addAxis({scaleKey:rt,placement:xt,show:yt,label:N.config.custom?.axisLabel,theme:l,grid:{show:N.config.custom?.axisGridShow},formatValue:(p,t)=>(0,V.cN)(N.display(p,t))});let Ot=U?.flatMap(p=>Object.values(p.fieldMap).filter(t=>p.indicesOnly.indexOf(t)===-1))??[],Q;for(let p=1;p<c.fields.length;p++){const t=c.fields[p],m={...t.config,custom:{...v,...t.config.custom}},n=m.custom;if(t===N||t.type!==W.PU.number&&t.type!==W.PU.enum)continue;let k=t.display??H;t.config.custom?.stacking?.mode===e.gs.Percent&&(k=(0,d.J)({field:{...t,config:{...t.config,unit:"percentunit"}},theme:l}));const ot=(0,s.M)(m,t.type),lt=(0,g.Qi)(t),Mt=(0,g.lz)(t,l).color;if(T.addScale($({scaleKey:ot,orientation:_?e.Lt.Vertical:e.Lt.Horizontal,direction:_?e.ON.Up:e.ON.Right,distribution:n.scaleDistribution?.type,log:n.scaleDistribution?.log,linearThreshold:n.scaleDistribution?.linearThreshold,min:t.config.min,max:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,centeredZero:n.axisCenteredZero,range:n.stacking?.mode===e.gs.Percent?(x,z,K)=>(z=z<0?-1:0,K=K>0?1:0,[z,K]):t.type===W.PU.enum?(x,z,K)=>[-1,t.config.type.enum.text.length]:void 0,decimals:t.config.decimals},t)),pt||(pt=ot),n.axisPlacement!==e.vM.Hidden){let x;n.axisColorMode===e.Y$.Series&&(lt.isByValue&&t.config.custom?.gradientMode===e.on.Scheme&&lt.id===P.Y.Thresholds?x=(0,a.pl)(1,l,lt,t.config.thresholds):x=Mt);const z={border:{show:n.axisBorderShow||!1,width:1/devicePixelRatio,stroke:x||l.colors.text.primary},ticks:{show:n.axisBorderShow||!1,stroke:x||l.colors.text.primary},color:x||l.colors.text.primary};let K,D,I;if(r.has(m.unit))K=M;else if(t.type===W.PU.enum){let A=t.config.type.enum.text;I=A.map((b,j)=>j),D=A}T.addAxis(ct({scaleKey:ot,label:n.axisLabel,size:n.axisWidth,placement:_?n.axisPlacement??e.vM.Auto:e.vM.Bottom,formatValue:(A,b)=>(0,V.cN)(k(A,b)),theme:l,grid:{show:n.axisGridShow},decimals:t.config.decimals,distr:n.scaleDistribution?.type,splits:I,values:D,incrs:K,...z},t))}const _t=n.drawStyle===e.GR.Points?e.yL.Always:n.showPoints;let Pt=()=>null;n.spanNulls!==!0&&(Pt=(x,z,K,D)=>{let I=[],A=x.series[z];if(!K&&D&&D.length){const[b,j]=A.idxs,ft=x.data[0],q=x.data[z],gt=Math.round(x.valToPos(ft[b],"x",!0)),st=Math.round(x.valToPos(ft[j],"x",!0));D[0][0]===gt&&I.push(b);for(let tt=0;tt<D.length;tt++){let Tt=D[tt],Dt=D[tt+1];if(Dt&&Tt[1]===Dt[0]){let et=x.posToIdx(Tt[1],!0);if(q[et]==null)for(let it=1;it<100;it++){if(q[et+it]!=null){et+=it;break}if(q[et-it]!=null){et-=it;break}}I.push(et)}}D[D.length-1][1]===st&&I.push(j)}return I.length?I:null});let{fillOpacity:dt}=n,ht=null,vt=null;if(t.state?.origin){Q||(Q=C(c,y));const x=y[t.state.origin.frameIndex],z=x?.fields[t.state.origin.fieldIndex],K=(0,h.Ct)(z??t,x,y);if(Ot.indexOf(K)>=0)ht=()=>null,vt=()=>{};else if(n.transform===e.NU.Constant){const D=J.A.paths.linear();ht=(I,A)=>{const b=I._data,j=E();let ft=[j.from.valueOf(),j.to.valueOf()],q=b[A].find(tt=>tt!=null),gt=[q,q],st=b.slice();return st[0]=ft,st[A]=gt,D({...I,_data:st},A,0,1)}}if(n.fillBelowTo){const D=c.fields.find(j=>n.fillBelowTo===j.name||n.fillBelowTo===j.config?.displayNameFromDS||n.fillBelowTo===(0,h.Ct)(j,c,y)),I=D?(0,h.Ct)(D,c,y):n.fillBelowTo,A=Q.get(K),b=Q.get(I);(0,F.isNumber)(b)&&(0,F.isNumber)(A)?(T.addBand({series:[A,b],fill:void 0}),dt||(dt=35)):dt=0}}let Et;lt.id===P.Y.Thresholds&&(Et=x=>(0,g.lz)(mt.fields[x],l).color),T.addSeries({pathBuilder:ht,pointsBuilder:vt,scaleKey:ot,showPoints:_t,pointsFilter:Pt,colorMode:lt,fillOpacity:dt,theme:l,dynamicSeriesColor:Et,drawStyle:n.drawStyle,lineColor:n.lineColor??Mt,lineWidth:n.lineWidth,lineInterpolation:n.lineInterpolation,lineStyle:n.lineStyle,barAlignment:n.barAlignment,barWidthFactor:n.barWidthFactor,barMaxWidth:n.barMaxWidth,pointSize:n.pointSize,spanNulls:n.spanNulls||!1,show:!n.hideFrom?.viz,gradientMode:n.gradientMode,thresholds:m.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,dataFrameFieldIndex:t.state?.origin}),n.thresholdsStyle&&m.thresholds&&(n.thresholdsStyle.mode??e.Ly.Off)!==e.Ly.Off&&T.addThresholds({config:n.thresholdsStyle,thresholds:m.thresholds,scaleKey:ot,theme:l,hardMin:t.config.min,hardMax:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax})}let Ct=(0,f.ro)(c);T.setStackingGroups(Ct),U?.forEach(p=>{Q||(Q=C(c,y));let t={};for(let m in p.fieldMap){let n=p.fieldMap[m];t[m]=Q.get(n)}p.init(T,t)});const St=15;let Bt={hover:{prox:(p,t,m)=>nt??(p.data[t][m]===null?St:null),skip:[null]},focus:{prox:nt??30}};return T.setCursor(Bt),T};function C(c,l){const u=new Map;return c.fields.forEach((E,y)=>{const U=E.state?.origin;if(U){const $=l[U.frameIndex]?.fields[U.fieldIndex];$&&u.set((0,h.Ct)($,l[U.frameIndex],l),y)}}),u}const L=["legend","options","theme"];class Y extends S.Component{constructor(){super(...arguments),this.prepConfig=(l,u,E)=>{const{theme:y,timeZone:U,options:$,renderers:ct,tweakAxis:nt,tweakScale:ut}=this.props;return X({frame:l,theme:y,timeZones:Array.isArray(U)?U:[U],getTimeRange:E,allFrames:u,renderers:ct,tweakScale:ut,tweakAxis:nt,hoverProximity:$?.tooltip?.hoverProximity,orientation:$?.orientation})},this.renderLegend=l=>{const{legend:u,frames:E}=this.props;return!l||u&&!u.showLegend||!(0,B.t)(l,E)?null:(0,O.jsx)(B.$,{data:E,config:l,...u})}}render(){return(0,O.jsx)(w.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:L,renderLegend:this.renderLegend})}}const G=(0,R.cV)(Y);G.displayName="TimeSeries"},22731:(at,Z,i)=>{i.d(Z,{k:()=>h});var O=i(74848),S=i(83195),B=i(11261),R=i(52622),w=i(11389),F=i(75073),J=i(52415),W=i(55307),V=i(10875),d=i(21164),g=i(5514),P=i(82915);const h=({series:e,_rest:o,dataIdxs:a,seriesIdx:s,mode:f=R.$N.Single,sortOrder:r=R.xB.None,isPinned:M,annotate:H,maxHeight:v,replaceVariables:X})=>{const C=e.fields[0],L=(0,S.cN)(C.display(C.values[a[0]])),Y=(0,V.cp)(e.fields,C,a,s,f,r,l=>l.type===B.PU.number||l.type===B.PU.enum);o?.forEach(l=>{l.config.custom?.hideFrom?.tooltip||Y.push({label:l.state?.displayName??l.name,value:(0,g.S)(l,l.values[a[0]])})});let G;if(M&&s!=null){const l=e.fields[s],u=a[s],E=(0,d.u)(l,u),y=(0,d.O)(e,l,X);G=(0,O.jsx)(F.S,{dataLinks:E,actions:y,annotate:H})}const c=C.config.custom?.hideFrom?.tooltip?null:{label:C.type===B.PU.time?"":C.state?.displayName??C.name,value:L};return(0,O.jsxs)(W.i,{children:[c!=null&&(0,O.jsx)(J.A,{item:c,isPinned:M}),(0,O.jsx)(w.o,{items:Y,isPinned:M,scrollable:(0,P.T5)({mode:f,maxHeight:v}),maxHeight:v}),G]})}},5514:(at,Z,i)=>{i.d(Z,{S:()=>S});var O=i(83195);function S(B,R){return B.display?(0,O.cN)(B.display(R)):`${R}`}}}]);

//# sourceMappingURL=94.ebca783641d5754a27ec.js.map