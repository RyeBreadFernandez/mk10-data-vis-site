"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2666],{11389:(F,R,e)=>{e.d(R,{o:()=>f});var t=e(74848),r=e(32196),p=e(40845),C=e(13471);const f=({items:h,children:x,isPinned:s,scrollable:U=!1,maxHeight:D})=>{const M=(0,p.of)(d),v=U?{maxHeight:D,overflowY:"auto"}:{};return(0,t.jsxs)("div",{className:M.wrapper,style:v,children:[h.map(({label:l,value:u,color:a,colorIndicator:m,colorPlacement:E,isActive:g,lineStyle:n},c)=>(0,t.jsx)(C.B,{label:l,value:u,color:a,colorIndicator:m,colorPlacement:E,isActive:g,justify:"space-between",isPinned:s,lineStyle:n,showValueScroll:!U},c)),x]})},d=h=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${h.colors.border.medium}`,padding:h.spacing(1)})})},75073:(F,R,e)=>{e.d(R,{S:()=>D});var t=e(74848),r=e(32196),p=e(67061),C=e(72109),f=e(55852),d=e(40845);function h({action:v,...l}){return(0,t.jsx)(f.$n,{variant:"primary",size:"sm",onClick:v.onClick,...l,children:v.title})}const x="add-annotation-button",s=v=>(0,t.jsx)(p.B,{direction:"column",justifyContent:"flex-start",children:v.map((l,u)=>(0,t.jsx)(C.Y,{href:l.href,external:l.target==="_blank",weight:"medium",inline:!1,variant:"bodySmall",children:l.title},u))}),U=v=>(0,t.jsx)(p.B,{direction:"column",justifyContent:"flex-start",children:v.map((l,u)=>(0,t.jsx)(h,{action:l,variant:"secondary"},u))}),D=({dataLinks:v,actions:l,annotate:u})=>{const a=(0,d.of)(M);return(0,t.jsxs)("div",{className:a.wrapper,children:[v.length>0&&(0,t.jsx)("div",{className:a.dataLinks,children:s(v)}),l&&l.length>0&&(0,t.jsx)("div",{className:a.dataLinks,children:U(l)}),u!=null&&(0,t.jsx)("div",{className:a.addAnnotations,children:(0,t.jsx)(f.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:x,onClick:u,children:"Add annotation"})})]})},M=v=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:v.spacing(0)}),dataLinks:(0,r.css)({borderTop:`1px solid ${v.colors.border.medium}`,padding:v.spacing(1)}),addAnnotations:(0,r.css)({borderTop:`1px solid ${v.colors.border.medium}`,padding:v.spacing(1)})})},52415:(F,R,e)=>{e.d(R,{A:()=>f});var t=e(74848),r=e(32196),p=e(40845),C=e(13471);const f=({item:h,isPinned:x})=>{const s=(0,p.of)(d),{label:U,value:D,color:M,colorIndicator:v}=h;return(0,t.jsx)("div",{className:s.wrapper,children:(0,t.jsx)(C.B,{label:U,value:D,color:M,colorIndicator:v,marginRight:"22px",isPinned:x})})},d=h=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:h.spacing(1),lineHeight:1})})},13471:(F,R,e)=>{e.d(R,{B:()=>E});var t=e(74848),r=e(32196),p=e(96540),C=e(40845),f=e(32982),d=e(56034),h=e(24293),x=e(94536),s=e(79871),U=e(10875),D=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(D||{});const M=({color:n=h.F,colorIndicator:c=s.Ev,position:o=0,lineStyle:O})=>{const y=(0,C.of)(v);return c===s.fX.series?(0,t.jsx)(x.p,{color:n,lineStyle:O,className:o===0?y.leading:y.trailing}):(0,t.jsx)("span",{style:{backgroundColor:n},className:(0,r.cx)(o===0?y.leading:y.trailing,(0,U.L$)(c,y))})},v=n=>({leading:(0,r.css)({marginRight:n.spacing(.5)}),trailing:(0,r.css)({marginLeft:n.spacing(.5)}),value:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,r.css)({}),pie_1_4:(0,r.css)({}),pie_2_4:(0,r.css)({}),pie_3_4:(0,r.css)({}),marker_sm:(0,r.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,r.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var l=(n=>(n.label="label",n.value="value",n))(l||{});const u="Copied to clipboard",a=2*1e3,m=7,E=({label:n,value:c,color:o,colorIndicator:O,colorPlacement:y=s.lJ.first,justify:P="flex-start",isActive:T=!1,marginRight:A="0px",isPinned:W,lineStyle:K,showValueScroll:j})=>{const i=(0,C.of)(g,P,A),$=j?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[_,I]=(0,p.useState)(!1),[J,z]=(0,p.useState)(null),[V,w]=(0,p.useState)(!1),L=(0,p.useRef)(null),S=(0,p.useRef)(null);(0,p.useEffect)(()=>{let B;return V&&(B=setTimeout(()=>{w(!1)},a)),()=>{window.clearTimeout(B)}},[V]);const N=async(B,G)=>{if(!(navigator?.clipboard&&window.isSecureContext)){H(B,G);return}try{await navigator.clipboard.writeText(B),z({[`${G}`]:B}),w(!0)}catch{z(null)}},H=(B,G)=>{const X=document.createElement("textarea");L.current?.appendChild(X),X.value=B,X.focus(),X.select();try{document.execCommand("copy")&&(z({[`${G}`]:B}),w(!0))}catch(b){console.error("Unable to copy to clipboard",b)}X.remove()},Y=B=>{B.currentTarget.offsetWidth<B.currentTarget.scrollWidth&&I(!0)},Z=()=>I(!1);return n.length*m>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,t.jsxs)("div",{className:i.contentWrapper,children:[(o||n)&&(0,t.jsxs)("div",{className:i.valueWrapper,children:[o&&y===s.lJ.first&&(0,t.jsx)(M,{color:o,colorIndicator:O,lineStyle:K}),W?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.m,{content:n,interactive:!1,show:_,children:(0,t.jsxs)(t.Fragment,{children:[V&&J?.label&&(0,t.jsx)(f.r,{placement:"top",referenceElement:L.current,children:u}),(0,t.jsx)("div",{className:(0,r.cx)(i.label,T&&i.activeSeries,navigator?.clipboard&&i.copy),onMouseEnter:Y,onMouseLeave:Z,onClick:()=>N(n,"label"),ref:L,children:n})]})})}):(0,t.jsx)("div",{className:(0,r.cx)(i.label,T&&i.activeSeries),children:n})]}),(0,t.jsxs)("div",{className:i.valueWrapper,children:[o&&y===s.lJ.leading&&(0,t.jsx)(M,{color:o,colorIndicator:O,position:D.Leading,lineStyle:K}),W?(0,t.jsxs)(t.Fragment,{children:[V&&J?.value&&(0,t.jsx)(f.r,{placement:"top",referenceElement:S.current,children:u}),(0,t.jsx)("div",{className:(0,r.cx)(i.value,T,navigator?.clipboard&&i.copy),style:$,onClick:()=>N(c?c.toString():"","value"),ref:S,children:c})]}):(0,t.jsx)("div",{className:(0,r.cx)(i.value,T),style:$,children:c}),o&&y===s.lJ.trailing&&(0,t.jsx)(M,{color:o,colorIndicator:O,position:D.Trailing,lineStyle:K})]})]})},g=(n,c,o)=>({contentWrapper:(0,r.css)({display:"flex",alignItems:"start",justifyContent:c,marginRight:o}),label:(0,r.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,r.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,r.css)({display:"flex",alignItems:"center"}),activeSeries:(0,r.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,r.css)({cursor:"pointer"})})},55307:(F,R,e)=>{e.d(R,{i:()=>C});var t=e(74848),r=e(32196),p=e(40845);const C=({children:d,className:h})=>{const x=(0,p.of)(f);return(0,t.jsx)("div",{className:(0,r.cx)(x.wrapper,h),children:d})},f=d=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",fontSize:d.typography.bodySmall.fontSize})})},81530:(F,R,e)=>{e.d(R,{X:()=>D,k:()=>s});var t=e(90708),r=e(26272),p=e(11261),C=e(80997),f=e(17172),d=e(10096),h=e(77920),x=e(3704);const s=(l,u,a,m,E,g)=>!E||E.length===0?[]:E.map(c=>{const o=(0,t.vd)(l,u,a),O={...a,__dataContext:o},y=(T,A,W)=>m(T,{...O,...A},W);g.valueRowIndex!==void 0&&!isNaN(g.valueRowIndex)?o.value.rowIndex=g.valueRowIndex:o.value.calculatedValue=g.calculatedValue;let P={title:"",onClick:T=>{}};return P={title:m(c.title||"",O),onClick:(T,A)=>{U(c,y)}},P}).filter(c=>!!c),U=(l,u)=>{try{const a=new URL(M(u(l.fetch.url))),m={};let E={url:a.toString(),method:l.fetch.method,data:v(l,u),headers:m};l.fetch.headers&&l.fetch.headers.forEach(([g,n])=>{m[u(g)]=u(n)}),l.fetch.queryParams&&(l.fetch.queryParams?.forEach(([g,n])=>{a.searchParams.append(u(g),u(n))}),E.url=a.toString()),m["X-Grafana-Action"]="1",E.headers=m,(0,f.AI)().fetch(E).subscribe({error:g=>{d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(g)},complete:()=>{d.lE.emit(r.r1.alertSuccess,["API call was successful"])}})}catch(a){d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(a);return}},D=(l=[],u=[])=>({name:"Default field",type:p.PU.string,config:{links:l,actions:u},values:[]}),M=l=>{if(l.startsWith("/")){const a=C.sQ.sanitizeUrl(l);l=(0,x.z)(a,[])}return l},v=(l,u)=>{let a=l.fetch.body?u(l.fetch.body):"{}";return l.fetch.method===h.DO.GET&&(a=void 0),a}},77920:(F,R,e)=>{e.d(R,{DO:()=>C,en:()=>t,gR:()=>r,xp:()=>p});var t=(s=>(s.Center="center",s.Left="left",s.LeftRight="leftright",s.Right="right",s.Scale="scale",s))(t||{}),r=(s=>(s.Bottom="bottom",s.Center="center",s.Scale="scale",s.Top="top",s.TopBottom="topbottom",s))(r||{}),p=(s=>(s.Contain="contain",s.Cover="cover",s.Fill="fill",s.Original="original",s.Tile="tile",s))(p||{}),C=(s=>(s.GET="GET",s.POST="POST",s.PUT="PUT",s))(C||{}),f=(s=>(s.Straight="straight",s))(f||{});const d={vertices:[]},h={connections:[]},x={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},21164:(F,R,e)=>{e.d(R,{O:()=>C,u:()=>p});var t=e(32264),r=e(81530);const p=(f,d)=>{const h=[];if((f.config.links?.length??0)>0&&f.getLinks!=null){const x=f.values[d],s=f.display?f.display(x):{text:`${x}`,numeric:+x},U=new Set;f.getLinks({calculatedValue:s,valueRowIndex:d}).forEach(D=>{const M=`${D.title}/${D.href}`;U.has(M)||(h.push(D),U.add(M))})}return h},C=(f,d,h)=>{if(!t.$.featureToggles?.vizActions)return[];const x=[],s=new Set;return(0,r.k)(f,d,d.state.scopedVars,h,d.config.actions??[],{}).forEach(D=>{const M=`${D.title}`;s.has(M)||(x.push(D),s.add(M))}),x}},82915:(F,R,e)=>{e.d(R,{B_:()=>D,Fg:()=>l,O2:()=>v,T5:()=>u});var t=e(11261),r=e(28240),p=e(83195),C=e(57875),f=e(50311),d=e(46294),h=e(39624),x=e(52622),s=e(55129);function U(a){let m=new Map;return a.map(g=>({...g,fields:g.fields.map(n=>{if(n.type===t.PU.enum){let c=(0,s.M)(n.config,n.type),o=m.get(c);o||(o=[],m.set(c,o));let O=n.values.toArray().slice(),y=n.config.type.enum.text;if(o.length>0)for(let P=0;P<O.length;P++)O[P]+=o.length;return o.push(...y),n.config.type.enum.text=o,{...n,values:O}}return n})}))}function D(a,m,E,g){if(!a?.length)return null;(0,r.Fm)(a);let n=g!=null;g!=null&&g>0&&(a=[{...a[0],fields:[a[0].fields[g],...a[0].fields.filter((y,P)=>P!==g)]}]);for(let y of a)for(let P of y.fields)P.type===t.PU.time&&typeof P.values[0]!="number"&&(P.values=(0,f.s7)(P,{destinationType:t.PU.time}).values);let c=0;e:for(let y of a)for(let P of y.fields)if(P.type===t.PU.enum&&++c>1){a=U(a);break e}let o;const O=[];for(let y of a){const P=[];let T=!1,A=!1,W=n?y:(0,d.M)({frame:y,refFieldPseudoMin:E?.from.valueOf(),refFieldPseudoMax:E?.to.valueOf()});const K=(0,h.C)(W).fields;for(let j=0;j<K?.length;j++){const i=K[j];switch(i.type){case t.PU.time:T=!0,P.push(i);break;case t.PU.number:A=n?j>0:!0,o={...i,values:i.values.map(I=>Number.isFinite(I)||I==null?I:null)},P.push(o);break;case t.PU.enum:A=!0;case t.PU.string:o={...i,values:i.values},P.push(o);break;case t.PU.boolean:A=!0;const $=i.config?.custom??{},_={...i.config,max:1,min:0,custom:$};$.lineInterpolation!==x.dx.StepBefore&&($.lineInterpolation=x.dx.StepAfter),o={...i,config:_,type:t.PU.number,values:i.values.map(I=>I==null?I:I?1:0)},(0,p.j9)(_.unit)||(_.unit="bool",o.display=(0,C.J)({field:o,theme:m})),P.push(o);break}}(n||T)&&A&&O.push({...y,length:W.length,fields:P})}return O.length?(v(O,m,0),M(O,m),O):null}const M=(a,m)=>{const{palette:E}=m.visualization;for(const g of a)for(const n of g.fields)if(n.type===t.PU.enum){const c=E[n.state?.seriesIndex%E.length],o=m.visualization.getColorByName(c),O=n.config.type.enum;O.color=Array(O.text.length).fill(o),n.display=(0,C.J)({field:n,theme:m})}},v=(a,m,E)=>{let g=0;a.forEach(n=>{n.fields.forEach((c,o)=>{o!==E&&(c.type===t.PU.number||c.type===t.PU.boolean||c.type===t.PU.enum)&&(c.state={...c.state,seriesIndex:g++},c.display=(0,C.J)({field:c,theme:m}))})})};function l(a,m){return!a||!a.length?[m]:a.map(E=>E?.length?E:m)}const u=a=>a.mode===x.$N.Multi&&a.maxHeight!=null},32475:(F,R,e)=>{e.r(R),e.d(R,{plugin:()=>P});var t=e(65158),r=e(11261),p=e(89654),C=e(22680),f=e(41706),d=e(74848),h=e(96540),x=e(85200),s=e(1173),U=e(73060),D=e(32264),M=e(97152),v=e(79041),l=e(23117),u=e(52622),a=e(38761),m=e(40458),E=e(95168),g=e(63577),n=e(22731),c=e(82915);const o=({data:T,timeRange:A,timeZone:W,width:K,height:j,options:i,fieldConfig:$,replaceVariables:_,id:I})=>{const{dataLinkPostProcessor:J}=(0,v.d2)(),z=i.xField??T.series[0].fields.find(L=>L.type===r.PU.number)?.name,V=(L,S,N)=>(S={...S,x:x.sJ.get(s.Ct.byName).get(z)},(0,m.m)(L,S)),w=(0,h.useMemo)(()=>{if(T.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:T.series};let L=T.series,S;if(i.xField){if(S=(0,g.findFieldIndex)(i.xField,L[0]),S==null)return{warning:"Unable to find field: "+i.xField,frames:T.series}}else if(S=L[0].fields.findIndex(N=>N.type===r.PU.number),S===-1)return{warning:"No numeric fields found for X axis",frames:L};if(S!=null){const N=L[0].fields[S];if(N.type===r.PU.number&&!(0,U.g2)(N.values))return{warning:"Values must be in ascending order",frames:L}}return{frames:(0,c.B_)(L,D.$.theme2,void 0,S)}},[T.series,i.xField]);return w.warning||!w.frames?(0,d.jsx)(M.a,{panelId:I,fieldConfig:$,data:T,message:w.warning,needsNumberField:!0}):(0,d.jsx)(E.Z,{frames:w.frames,structureRev:T.structureRev,timeRange:A,timeZone:W,width:K,height:j,legend:i.legend,options:i,preparePlotFrame:V,replaceVariables:_,dataLinkPostProcessor:J,children:(L,S)=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{config:L}),i.tooltip.mode!==u.$N.None&&(0,d.jsx)(a.xl,{config:L,hoverMode:i.tooltip.mode===u.$N.Single?a.b3.xOne:a.b3.xAll,render:(N,H,Y,Z=!1)=>(0,d.jsx)(n.k,{series:S,dataIdxs:H,seriesIdx:Y,mode:i.tooltip.mode,sortOrder:i.tooltip.sort,isPinned:Z,maxHeight:i.tooltip.maxHeight,replaceVariables:_}),maxWidth:i.tooltip.maxWidth})]})})};var O=e(38824);class y{getSuggestionsForData(A){const{dataSummary:W}=A;return W.numberFieldCount<2||W.rowCountTotal<2||W.rowCountTotal<2?void 0:A.getListAppender({name:O.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:u.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:j=>{j.fieldConfig?.defaults.custom?.drawStyle!==u.GR.Bars&&(j.fieldConfig.defaults.custom.lineWidth=Math.max(j.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const P=new t.m(o).useFieldConfig((0,f.V)(f.S,!1)).setPanelOptions(T=>{const A=["X axis"];T.addFieldNamePicker({path:"xField",name:"X field",description:"An increasing numeric value",category:A,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:W=>W.type===r.PU.number}}),p.D(T,!1,!0),C.H(T)}).setSuggestionsSupplier(new y)}}]);

//# sourceMappingURL=trendPanel.ff673c56046e09606a68.js.map