"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5967],{86337:(m,E,e)=>{e.r(E),e.d(E,{DataSourceInsightsUpgradePage:()=>_,default:()=>M});var l=e(74848),o=e(54148),r=e(21780),c=e(31152),a=e(8771);const _=()=>{const{uid:h=""}=(0,o.g)(),{navId:L,pageNav:P}=(0,c.n)("insights");return(0,l.jsx)(r.YW,{navId:L,pageNav:P,children:(0,l.jsx)(r.YW.Contents,{children:(0,l.jsx)(a.H,{uid:h})})})},M=_},8771:(m,E,e)=>{e.d(E,{H:()=>a});var l=e(74848),o=e(40845),r=e(77454),c=e(85464);const a=({uid:_})=>{(0,c.oU)(_);const M=(0,o.$j)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Iz,{featureName:"data source usage insights",featureId:"data-source-insights"}),(0,l.jsx)(r.El,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${M.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"})]})}},31152:(m,E,e)=>{e.d(E,{n:()=>h});var l=e(24180),o=e(19347),r=e(17422),c=e(11084),a=e(74984),_=e(83391),M=e(31678);function h(L){const{uid:P}=(0,l.g)(),C=(0,l.zy)(),v=(0,c.xw)(P),R=(0,c.S4)(v.type),x=(0,_.ob)(v.type),W=new URLSearchParams(C.search),I=L||W.get("page"),{plugin:g,loadError:S,loading:T}=(0,c._e)(),f=(0,o.l)()?.getInstanceSettings(P),B=!!(f?.meta?.alerting??!1),y=f?.type==="alertmanager",K=B||y,A=(0,M.useSelector)(i=>i.navIndex),U=I?`datasource-${I}-${P}`:`datasource-settings-${P}`;let n={node:{text:"Data Source Nav Node"},main:{text:"Data Source Nav Node"}};if(S){const i={text:S,subTitle:"Data Source Error",icon:"exclamation-triangle"};n={node:i,main:i}}return(T||!g)&&(n=(0,r.tc)(A,U,(0,a.$m)("settings"))),g&&(n=(0,r.tc)(A,U,(0,a.Vh)((0,a.R4)(v,g),I||"settings"))),{navId:"connections-datasources",pageNav:{...n.main,dataSourcePluginName:x?.name||g?.meta.name||"",active:!0,text:v.name,subTitle:`Type: ${R.name}`,children:(n.main.children||[]).map(i=>({...i,url:i.url?.replace("datasources/edit/","/connections/datasources/edit/")}))},dataSourceHeader:{alertingSupported:K}}}},458:(m,E,e)=>{e.d(E,{C:()=>r});var l=e(96540),o=e(83883);const r=(0,l.createContext)(o.I)},11084:(m,E,e)=>{e.d(E,{$k:()=>T,BY:()=>R,S4:()=>y,Tn:()=>B,US:()=>x,Um:()=>g,_e:()=>K,aM:()=>U,hx:()=>I,k9:()=>S,oU:()=>v,u1:()=>A,xw:()=>f});var l=e(96540),o=e(97007),r=e(28138),c=e(10096),a=e(31678),_=e(28444),M=e(11959),h=e(34258),L=e(458),P=e(36227),C=e(54226);const v=n=>{const u=(0,a.useDispatch)();(0,l.useEffect)(()=>(u((0,h.PK)(n)),function(){u((0,o.N)({cleanupAction:O=>O.dataSourceSettings=P.IJ}))}),[n,u])},R=n=>{const u=(0,a.useDispatch)(),i=U();return()=>u((0,h.Ge)(n,i.Edit))},x=()=>{const n=(0,a.useDispatch)(),u=(0,a.useSelector)(O=>O.dataSources.isLoadingDataSources),i=(0,a.useSelector)(O=>O.dataSources.dataSources);return(0,l.useEffect)(()=>{n((0,h.bn)())},[n]),{isLoading:u,dataSources:i}},W=n=>{const u=useDispatch();useEffect(()=>{u(loadDataSource(n))},[u,n])},I=()=>{const n=(0,a.useDispatch)();(0,l.useEffect)(()=>{n((0,h.G2)())},[n])},g=()=>{const n=(0,a.useDispatch)(),u=U();return i=>{n((0,h.du)(i,u.Edit))}},S=()=>{const n=(0,a.useDispatch)();return async u=>n((0,h.jB)(u))},T=()=>{const n=(0,a.useDispatch)(),{name:u}=(0,a.useSelector)(i=>i.dataSources.dataSource);return()=>{r.A.publish(new _.bY({title:"Delete",text:`Are you sure you want to delete the "${u}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>n((0,h.Qq)())}))}},f=n=>(0,a.useSelector)(u=>(0,C.U4)(u.dataSources,n)),B=n=>{const u=f(n);return(0,M.h)(u)},y=n=>(0,a.useSelector)(u=>(0,C.Fj)(u.dataSources,n)),K=()=>(0,a.useSelector)(n=>n.dataSourceSettings),A=n=>{const u=f(n),i=u.readOnly===!0,O=c.TP.hasPermissionInMetadata(a.AccessControlAction.DataSourcesWrite,u),N=c.TP.hasPermissionInMetadata(a.AccessControlAction.DataSourcesDelete,u);return{readOnly:i,hasWriteRights:O,hasDeleteRights:N}},U=()=>(0,l.useContext)(L.C)},85464:(m,E,e)=>{e.d(E,{$k:()=>r.$k,$m:()=>c.$m,BY:()=>r.BY,Bs:()=>a.Bs,CR:()=>o.C,C_:()=>a.C_,S4:()=>r.S4,Tk:()=>a.Tk,Tn:()=>r.Tn,US:()=>r.US,Um:()=>r.Um,_e:()=>r._e,aM:()=>r.aM,du:()=>l.du,eB:()=>a.eB,hp:()=>_.hp,hx:()=>r.hx,jz:()=>a.jz,k9:()=>r.k9,lv:()=>_.lv,oU:()=>r.oU,rb:()=>a.rb,u1:()=>r.u1,wC:()=>_.wC,xs:()=>_.xs,xw:()=>r.xw,zC:()=>_.zC});var l=e(34258),o=e(458),r=e(11084),c=e(74984),a=e(36227),_=e(54226)},11959:(m,E,e)=>{e.d(E,{h:()=>r});var l=e(76885),o=e(71733);const r=c=>{const a=JSON.stringify({datasource:c.name,context:"explore"});return l.kM.renderUrl(o.I.assureBaseUrl("/explore"),{left:a})}},83391:(m,E,e)=>{e.d(E,{A5:()=>X,wr:()=>z,m5:()=>N,PW:()=>f,F9:()=>A,ob:()=>y,sM:()=>B,xX:()=>U,XN:()=>$,pw:()=>i,Gp:()=>u,qG:()=>G,SQ:()=>n});var l=e(96540),o=e(31678),r=e(5129),c=e(20701),a=e(25508),_=e(54479),M=e(14110),h=e(66253),L=e(31326);const P=t=>t.plugins,C=(0,a.Mz)(P,({items:t})=>t),{selectAll:v,selectById:R}=L.AI.getSelectors(C),x=t=>(0,a.Mz)(v,s=>{const d=t.keyword?(0,_.xb)(t.keyword.toLowerCase()):"",D=d!==""?(0,r.TD)(s,d):null;return d&&(0,M.rR)("plugins_search",{resultsCount:D?.length}),s.filter(p=>!(d&&D==null||d&&!D?.includes(p.id)||t.type&&p.type!==t.type||t.isInstalled!==void 0&&p.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&p.isEnterprise!==t.isEnterprise||t.hasUpdate!==void 0&&(p.hasUpdate!==t.hasUpdate||!(0,r.R7)(p))))}),W=t=>(0,a.Mz)(v,s=>{const d=[];for(const D of s)D.error&&(!t||D.type===t)&&d.push({pluginId:D.id,errorCode:D.error,pluginType:D.type});return d}),I=t=>(0,a.Mz)(P,({requests:s={}})=>s[t]),g=t=>(0,a.Mz)(I(t),s=>s?.status===h.IZ.Pending),S=t=>(0,a.Mz)(I(t),s=>s?.status===h.IZ.Rejected?s?.error:null),T=t=>(0,a.Mz)(I(t),s=>s===void 0),f=(t,s=r.by.nameAsc)=>{j();const d=(0,l.useMemo)(()=>x(t),[t]),D=(0,o.useSelector)(d),{isLoading:p,error:F}=O(),H=(0,r.Xc)(D,s);return{isLoading:p,error:F,plugins:H}},B=()=>{const{isLoading:t}=N(),{plugins:s}=f({isInstalled:!0}),d=s.filter(r.R7);return{isLoading:t,updatablePlugins:d}},y=t=>(j(),Y(t),(0,o.useSelector)(s=>R(s,t))),K=t=>(J(),useSelector(s=>selectById(s,t))),A=t=>(j(),(0,o.useSelector)(W(t))),U=()=>{const t=(0,o.useDispatch)();return(s,d,D)=>t((0,c.ai)({id:s,version:d,isUpdating:D}))},n=()=>{const t=(0,o.useDispatch)();return()=>t((0,c.nT)())},u=()=>{const t=(0,o.useDispatch)();return s=>t((0,c.JC)(s))},i=()=>(0,o.useSelector)(S(c.JJ.typePrefix))===null,O=()=>{const t=(0,o.useSelector)(g("plugins/fetchLocal")),s=(0,o.useSelector)(S("plugins/fetchLocal"));return{isLoading:t,error:s}},N=()=>{const t=(0,o.useSelector)(g(c.mj.typePrefix)),s=(0,o.useSelector)(g("plugins/fetchLocal")),d=(0,o.useSelector)(g("plugins/fetchRemote")),D=t||s||d,p=(0,o.useSelector)(S(c.mj.typePrefix));return{isLoading:D,error:p}},z=()=>{const t=(0,o.useSelector)(g(c.t5.typePrefix)),s=(0,o.useSelector)(S(c.t5.typePrefix));return{isLoading:t,error:s}},$=()=>{const t=(0,o.useSelector)(g(c.ai.typePrefix)),s=(0,o.useSelector)(S(c.ai.typePrefix));return{isInstalling:t,error:s}},G=()=>{const t=(0,o.useSelector)(g(c.JC.typePrefix)),s=(0,o.useSelector)(S(c.JC.typePrefix));return{isUninstalling:t,error:s}},j=()=>{const t=(0,o.useDispatch)(),s=(0,o.useSelector)(T(c.mj.typePrefix));(0,l.useEffect)(()=>{s&&t((0,c.mj)())},[])},J=()=>{const t=useDispatch(),s=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{s&&t(fetchAllLocal())},[])},Y=t=>{const s=(0,o.useDispatch)(),d=(0,o.useSelector)(F=>R(F,t)),p=!(0,o.useSelector)(g(c.t5.typePrefix))&&d&&!d.details;(0,l.useEffect)(()=>{p&&s((0,c.t5)(t))},[d])},X=()=>{const t=(0,o.useDispatch)();return s=>t((0,c.t5)(s))}}}]);

//# sourceMappingURL=ConnectionsDataSourceInsightsUpgradePage.994047700dd4924ae4a9.js.map