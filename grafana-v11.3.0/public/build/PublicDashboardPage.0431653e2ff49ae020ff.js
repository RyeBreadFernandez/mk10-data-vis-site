"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{20851:(k,C,n)=>{n.d(C,{GU:()=>M,YO:()=>j,qm:()=>v});var s=n(74848),o=n(32196),a=n(96540),m=n(40845),f=n(19361),D=n(38645);const v=({children:e,enterAnimation:r=!0})=>{const b=(0,m.of)(j);return(0,s.jsx)("div",{className:(0,o.cx)(b.loginInnerBox,r&&b.enterAnimation),children:e})},M=({children:e,branding:r,isChangingPassword:b})=>{const l=(0,m.of)(j),[A,L]=(0,a.useState)(!1),I=r?.loginSubtitle??f.M.GetLoginSubTitle(),T=r?.loginTitle??f.M.LoginTitle,W=r?.loginBoxBackground||f.M.LoginBoxBackground(),N=r?.loginLogo,P=r?.hideEdition??f.M.HideEdition;return(0,a.useEffect)(()=>L(!0),[]),(0,s.jsxs)(f.M.LoginBackground,{className:(0,o.cx)(l.container,A&&l.loginAnim,r?.loginBackground),children:[(0,s.jsx)("div",{className:l.loginMain,children:(0,s.jsxs)("div",{className:(0,o.cx)(l.loginContent,W,"login-content-box"),children:[(0,s.jsxs)("div",{className:l.loginLogoWrapper,children:[(0,s.jsx)(f.M.LoginLogo,{className:l.loginLogo,logo:N}),(0,s.jsx)("div",{className:l.titleWrapper,children:b?(0,s.jsx)("h1",{className:l.mainTitle,children:"Update your password"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:l.mainTitle,children:T}),I&&(0,s.jsx)("h3",{className:l.subTitle,children:I})]})})]}),(0,s.jsx)("div",{className:l.loginOuterBox,children:e})]})}),r?.hideFooter?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(D.wi,{hideEdition:P,customLinks:r?.footerLinks})]})},h=(0,o.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,j=e=>({loginMain:(0,o.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,o.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,o.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,o.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,o.css)({width:"100%",maxWidth:60,marginBottom:e.spacing(2),[e.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,o.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(3)}),titleWrapper:(0,o.css)({textAlign:"center"}),mainTitle:(0,o.css)({fontSize:22,[e.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,o.css)({fontSize:e.typography.size.md,color:e.colors.text.secondary}),loginContent:(0,o.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:e.shape.radius.default,padding:e.spacing(2,0),opacity:0,[e.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[e.breakpoints.up("sm")]:{minHeight:e.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,o.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,o.css)({padding:e.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[e.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,o.css)({[e.transitions.handleMotion("no-preference")]:{animation:`${h} ease-out 0.2s`}})})},15663:(k,C,n)=>{n.r(C),n.d(C,{default:()=>is});var s=n(74848),o=n(32264),a=n(32196),m=n(96540),f=n(54148),D=n(64388),v=n(13544),M=n(84537),h=n(40845),j=n(67061),e=n(14578),r=n(21780),b=n(39419),l=n(31771);const A=v.Tp.pages.PublicDashboard,L=function(){const t=(0,h.of)(I),i=(0,l.P)();return i.footerHide?null:(0,s.jsx)("div",{className:t.footer,"data-testid":A.footer,children:(0,s.jsxs)("a",{className:t.link,href:i.footerLink,target:"_blank",rel:"noreferrer noopener",children:[i.footerText," ",(0,s.jsx)("img",{className:t.logoImg,alt:"",src:i.footerLogo})]})})},I=t=>({footer:(0,a.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:t.colors.background.canvas,position:"sticky",bottom:0,zIndex:t.zIndex.navbarFixed,padding:t.spacing(.5,0)}),link:(0,a.css)({display:"flex",alignItems:"center"}),logoImg:(0,a.css)({height:"16px",marginLeft:t.spacing(.5)})});var T=n(19361),W=n(20851);const N=v.Tp.pages.PublicDashboard.NotAvailable,P=({paused:t})=>{const i=(0,h.of)(G),c=(0,h.of)(W.YO),u=T.M.LoginBoxBackground();return(0,s.jsx)(T.M.LoginBackground,{className:i.container,"data-testid":N.container,children:(0,s.jsxs)("div",{className:(0,a.cx)(i.box,u),children:[(0,s.jsx)(T.M.LoginLogo,{className:c.loginLogo}),(0,s.jsx)("p",{className:i.title,"data-testid":N.title,children:t?"This dashboard has been paused by the administrator":"The dashboard you are trying to access does not exist"}),t&&(0,s.jsx)("p",{className:i.description,"data-testid":N.pausedDescription,children:"Try again later"})]})})},G=t=>({container:(0,a.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,a.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:t.spacing(4),zIndex:1,borderRadius:t.shape.borderRadius(4),padding:t.spacing(6,8),opacity:1}),title:(0,a.css)({fontSize:t.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,a.css)({fontSize:t.typography.h5.fontSize,margin:0})});var Y=n(95425),H=n(72255);const O=v.Tp.pages.PublicDashboardScene;function K({route:t}){const{accessToken:i=""}=(0,f.g)(),c=(0,H.sP)(),u=(0,h.of)(F),{dashboard:d,isLoading:p,loadError:x}=c.useState();return(0,m.useEffect)(()=>(c.loadDashboard({uid:i,route:Y.Z4.Public}),()=>{c.clearState()}),[c,i,t.routeName]),d?d.state.meta.publicDashboardEnabled===!1?(0,s.jsx)(P,{paused:!0}):d.state.meta.dashboardNotFound?(0,s.jsx)(P,{}):d.state.controls?.state.hideTimeControls?(0,s.jsx)(R,{model:d}):(0,s.jsx)(M.$L,{scene:d,children:(0,s.jsx)(R,{model:d})}):(0,s.jsxs)(r.YW,{layout:D.k.Custom,className:u.loadingPage,"data-testid":O.loadingPage,children:[p&&(0,s.jsx)(b.A,{}),x&&(0,s.jsx)("h2",{children:x})]})}function R({model:t}){const[i,c]=(0,m.useState)(!1),{controls:u,title:d}=t.useState(),{timePicker:p,refreshPicker:x,hideTimeControls:E}=u.useState(),y=t.getBodyToRender(),g=(0,h.of)(F);return(0,m.useEffect)(()=>(c(!0),t.activate()),[t]),i?(0,s.jsxs)(r.YW,{layout:D.k.Custom,className:g.page,"data-testid":O.page,children:[(0,s.jsxs)("div",{className:g.controls,children:[(0,s.jsxs)(j.B,{alignItems:"center",children:[(0,s.jsx)("div",{className:g.iconTitle,children:(0,s.jsx)(e.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,s.jsx)("span",{className:g.title,children:d})]}),!E&&(0,s.jsxs)(j.B,{children:[(0,s.jsx)(p.Component,{model:p}),(0,s.jsx)(x.Component,{model:x})]})]}),(0,s.jsx)("div",{className:g.body,children:(0,s.jsx)(y.Component,{model:y})}),(0,s.jsx)(L,{})]}):null}function F(t){return{loadingPage:(0,a.css)({justifyContent:"center"}),page:(0,a.css)({padding:t.spacing(0,2)}),controls:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:t.zIndex.navbarFixed,background:t.colors.background.canvas,padding:t.spacing(2,0),[t.breakpoints.down("sm")]:{flexDirection:"column",gap:t.spacing(1),alignItems:"stretch"}}),iconTitle:(0,a.css)({display:"none",[t.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:t.typography.h4.fontSize,margin:0}),body:(0,a.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}var $=n(84596),Z=n(95247),J=n(76888),Q=n(81862),z=n(31678),V=n(62367),X=n(82138),w=n(9980),q=n(2118),U=n(74856),_=n(20470);const ss=v.Tp.pages.PublicDashboard,ts=({dashboard:t})=>{const i=(0,z.useDispatch)(),c=(0,l.P)(),u=d=>{i((0,Q.Cj)(d))};return(0,s.jsx)(Z.d,{title:t.title,pageIcon:c.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!t.timepicker.hidden&&(0,s.jsx)(V.$,{dashboard:t,onChangeTimeZone:u})})},ns=t=>{const{route:i}=t,c=(0,f.zy)(),{accessToken:u}=(0,f.g)(),d=(0,z.useDispatch)(),p=(0,J.Il)(),x=(0,$.A)({...t,location:c}),E=(0,h.of)(es),y=(0,z.useSelector)(S=>S.dashboard),g=y.getModel();return(0,m.useEffect)(()=>{d((0,_.vR)({routeName:i.routeName,fixUrl:!1,accessToken:u,keybindingSrv:p.keybindings}))},[i.routeName,u,p.keybindings,d]),(0,m.useEffect)(()=>{if(x?.location.search!==c.search){const S=x?.queryParams,B=t.queryParams;(B?.from!==S?.from||B?.to!==S?.to)&&!g?.timepicker.hidden&&(0,U.jG)().updateTimeRangeFromUrl(),!S?.refresh&&B?.refresh&&(0,U.jG)().setAutoRefresh(B.refresh)}},[x,c.search,t.queryParams,g?.timepicker.hidden,u]),g?g.meta.publicDashboardEnabled===!1?(0,s.jsx)(P,{paused:!0}):g.meta.dashboardNotFound?(0,s.jsx)(P,{}):(0,s.jsxs)(r.YW,{pageNav:{text:g.title},layout:D.k.Custom,"data-testid":ss.page,children:[(0,s.jsx)(ts,{dashboard:g}),y.initError&&(0,s.jsx)(X.y,{initError:y.initError}),(0,s.jsx)("div",{className:E.gridContainer,children:(0,s.jsx)(q.N,{dashboard:g,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,s.jsx)("div",{className:E.footer,children:(0,s.jsx)(L,{})})]}):(0,s.jsx)(w.P,{initPhase:y.initPhase})},es=t=>({gridContainer:(0,a.css)({flex:1,padding:t.spacing(2,2,2,2),overflow:"auto"}),footer:(0,a.css)({padding:t.spacing(0,2)})}),os=ns;function as(t){return o.$.featureToggles.publicDashboardsScene?(0,s.jsx)(K,{...t}):(0,s.jsx)(os,{...t})}const is=as}}]);

//# sourceMappingURL=PublicDashboardPage.0431653e2ff49ae020ff.js.map