"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[323],{11389:(X,I,t)=>{t.d(I,{o:()=>p});var s=t(74848),c=t(32196),T=t(40845),W=t(13471);const p=({items:M,children:O,isPinned:l,scrollable:F=!1,maxHeight:j})=>{const g=(0,T.of)(d),v=F?{maxHeight:j,overflowY:"auto"}:{};return(0,s.jsxs)("div",{className:g.wrapper,style:v,children:[M.map(({label:u,value:i,color:a,colorIndicator:x,colorPlacement:P,isActive:m,lineStyle:n},h)=>(0,s.jsx)(W.B,{label:u,value:i,color:a,colorIndicator:x,colorPlacement:P,isActive:m,justify:"space-between",isPinned:l,lineStyle:n,showValueScroll:!F},h)),O]})},d=M=>({wrapper:(0,c.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${M.colors.border.medium}`,padding:M.spacing(1)})})},75073:(X,I,t)=>{t.d(I,{S:()=>j});var s=t(74848),c=t(32196),T=t(67061),W=t(72109),p=t(55852),d=t(40845);function M({action:v,...u}){return(0,s.jsx)(p.$n,{variant:"primary",size:"sm",onClick:v.onClick,...u,children:v.title})}const O="add-annotation-button",l=v=>(0,s.jsx)(T.B,{direction:"column",justifyContent:"flex-start",children:v.map((u,i)=>(0,s.jsx)(W.Y,{href:u.href,external:u.target==="_blank",weight:"medium",inline:!1,variant:"bodySmall",children:u.title},i))}),F=v=>(0,s.jsx)(T.B,{direction:"column",justifyContent:"flex-start",children:v.map((u,i)=>(0,s.jsx)(M,{action:u,variant:"secondary"},i))}),j=({dataLinks:v,actions:u,annotate:i})=>{const a=(0,d.of)(g);return(0,s.jsxs)("div",{className:a.wrapper,children:[v.length>0&&(0,s.jsx)("div",{className:a.dataLinks,children:l(v)}),u&&u.length>0&&(0,s.jsx)("div",{className:a.dataLinks,children:F(u)}),i!=null&&(0,s.jsx)("div",{className:a.addAnnotations,children:(0,s.jsx)(p.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:O,onClick:i,children:"Add annotation"})})]})},g=v=>({wrapper:(0,c.css)({display:"flex",flexDirection:"column",flex:1,padding:v.spacing(0)}),dataLinks:(0,c.css)({borderTop:`1px solid ${v.colors.border.medium}`,padding:v.spacing(1)}),addAnnotations:(0,c.css)({borderTop:`1px solid ${v.colors.border.medium}`,padding:v.spacing(1)})})},52415:(X,I,t)=>{t.d(I,{A:()=>p});var s=t(74848),c=t(32196),T=t(40845),W=t(13471);const p=({item:M,isPinned:O})=>{const l=(0,T.of)(d),{label:F,value:j,color:g,colorIndicator:v}=M;return(0,s.jsx)("div",{className:l.wrapper,children:(0,s.jsx)(W.B,{label:F,value:j,color:g,colorIndicator:v,marginRight:"22px",isPinned:O})})},d=M=>({wrapper:(0,c.css)({display:"flex",flexDirection:"column",flex:1,padding:M.spacing(1),lineHeight:1})})},13471:(X,I,t)=>{t.d(I,{B:()=>P});var s=t(74848),c=t(32196),T=t(96540),W=t(40845),p=t(32982),d=t(56034),M=t(24293),O=t(94536),l=t(79871),F=t(10875),j=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(j||{});const g=({color:n=M.F,colorIndicator:h=l.Ev,position:f=0,lineStyle:B})=>{const U=(0,W.of)(v);return h===l.fX.series?(0,s.jsx)(O.p,{color:n,lineStyle:B,className:f===0?U.leading:U.trailing}):(0,s.jsx)("span",{style:{backgroundColor:n},className:(0,c.cx)(f===0?U.leading:U.trailing,(0,F.L$)(h,U))})},v=n=>({leading:(0,c.css)({marginRight:n.spacing(.5)}),trailing:(0,c.css)({marginLeft:n.spacing(.5)}),value:(0,c.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,c.css)({}),pie_1_4:(0,c.css)({}),pie_2_4:(0,c.css)({}),pie_3_4:(0,c.css)({}),marker_sm:(0,c.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,c.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,c.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var u=(n=>(n.label="label",n.value="value",n))(u||{});const i="Copied to clipboard",a=2*1e3,x=7,P=({label:n,value:h,color:f,colorIndicator:B,colorPlacement:U=l.lJ.first,justify:S="flex-start",isActive:V=!1,marginRight:H="0px",isPinned:k,lineStyle:J,showValueScroll:Y})=>{const D=(0,W.of)(m,S,H),Z=Y?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[w,G]=(0,T.useState)(!1),[ot,lt]=(0,T.useState)(null),[tt,at]=(0,T.useState)(!1),it=(0,T.useRef)(null),gt=(0,T.useRef)(null);(0,T.useEffect)(()=>{let b;return tt&&(b=setTimeout(()=>{at(!1)},a)),()=>{window.clearTimeout(b)}},[tt]);const ht=async(b,et)=>{if(!(navigator?.clipboard&&window.isSecureContext)){xt(b,et);return}try{await navigator.clipboard.writeText(b),lt({[`${et}`]:b}),at(!0)}catch{lt(null)}},xt=(b,et)=>{const Q=document.createElement("textarea");it.current?.appendChild(Q),Q.value=b,Q.focus(),Q.select();try{document.execCommand("copy")&&(lt({[`${et}`]:b}),at(!0))}catch(rt){console.error("Unable to copy to clipboard",rt)}Q.remove()},Et=b=>{b.currentTarget.offsetWidth<b.currentTarget.scrollWidth&&G(!0)},yt=()=>G(!1);return n.length*x>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,s.jsxs)("div",{className:D.contentWrapper,children:[(f||n)&&(0,s.jsxs)("div",{className:D.valueWrapper,children:[f&&U===l.lJ.first&&(0,s.jsx)(g,{color:f,colorIndicator:B,lineStyle:J}),k?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(d.m,{content:n,interactive:!1,show:w,children:(0,s.jsxs)(s.Fragment,{children:[tt&&ot?.label&&(0,s.jsx)(p.r,{placement:"top",referenceElement:it.current,children:i}),(0,s.jsx)("div",{className:(0,c.cx)(D.label,V&&D.activeSeries,navigator?.clipboard&&D.copy),onMouseEnter:Et,onMouseLeave:yt,onClick:()=>ht(n,"label"),ref:it,children:n})]})})}):(0,s.jsx)("div",{className:(0,c.cx)(D.label,V&&D.activeSeries),children:n})]}),(0,s.jsxs)("div",{className:D.valueWrapper,children:[f&&U===l.lJ.leading&&(0,s.jsx)(g,{color:f,colorIndicator:B,position:j.Leading,lineStyle:J}),k?(0,s.jsxs)(s.Fragment,{children:[tt&&ot?.value&&(0,s.jsx)(p.r,{placement:"top",referenceElement:gt.current,children:i}),(0,s.jsx)("div",{className:(0,c.cx)(D.value,V,navigator?.clipboard&&D.copy),style:Z,onClick:()=>ht(h?h.toString():"","value"),ref:gt,children:h})]}):(0,s.jsx)("div",{className:(0,c.cx)(D.value,V),style:Z,children:h}),f&&U===l.lJ.trailing&&(0,s.jsx)(g,{color:f,colorIndicator:B,position:j.Trailing,lineStyle:J})]})]})},m=(n,h,f)=>({contentWrapper:(0,c.css)({display:"flex",alignItems:"start",justifyContent:h,marginRight:f}),label:(0,c.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,c.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,c.css)({display:"flex",alignItems:"center"}),activeSeries:(0,c.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,c.css)({cursor:"pointer"})})},55307:(X,I,t)=>{t.d(I,{i:()=>W});var s=t(74848),c=t(32196),T=t(40845);const W=({children:d,className:M})=>{const O=(0,T.of)(p);return(0,s.jsx)("div",{className:(0,c.cx)(O.wrapper,M),children:d})},p=d=>({wrapper:(0,c.css)({display:"flex",flexDirection:"column",fontSize:d.typography.bodySmall.fontSize})})},81530:(X,I,t)=>{t.d(I,{X:()=>j,k:()=>l});var s=t(90708),c=t(26272),T=t(11261),W=t(80997),p=t(17172),d=t(10096),M=t(77920),O=t(3704);const l=(u,i,a,x,P,m)=>!P||P.length===0?[]:P.map(h=>{const f=(0,s.vd)(u,i,a),B={...a,__dataContext:f},U=(V,H,k)=>x(V,{...B,...H},k);m.valueRowIndex!==void 0&&!isNaN(m.valueRowIndex)?f.value.rowIndex=m.valueRowIndex:f.value.calculatedValue=m.calculatedValue;let S={title:"",onClick:V=>{}};return S={title:x(h.title||"",B),onClick:(V,H)=>{F(h,U)}},S}).filter(h=>!!h),F=(u,i)=>{try{const a=new URL(g(i(u.fetch.url))),x={};let P={url:a.toString(),method:u.fetch.method,data:v(u,i),headers:x};u.fetch.headers&&u.fetch.headers.forEach(([m,n])=>{x[i(m)]=i(n)}),u.fetch.queryParams&&(u.fetch.queryParams?.forEach(([m,n])=>{a.searchParams.append(i(m),i(n))}),P.url=a.toString()),x["X-Grafana-Action"]="1",P.headers=x,(0,p.AI)().fetch(P).subscribe({error:m=>{d.lE.emit(c.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(m)},complete:()=>{d.lE.emit(c.r1.alertSuccess,["API call was successful"])}})}catch(a){d.lE.emit(c.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(a);return}},j=(u=[],i=[])=>({name:"Default field",type:T.PU.string,config:{links:u,actions:i},values:[]}),g=u=>{if(u.startsWith("/")){const a=W.sQ.sanitizeUrl(u);u=(0,O.z)(a,[])}return u},v=(u,i)=>{let a=u.fetch.body?i(u.fetch.body):"{}";return u.fetch.method===M.DO.GET&&(a=void 0),a}},77920:(X,I,t)=>{t.d(I,{DO:()=>W,en:()=>s,gR:()=>c,xp:()=>T});var s=(l=>(l.Center="center",l.Left="left",l.LeftRight="leftright",l.Right="right",l.Scale="scale",l))(s||{}),c=(l=>(l.Bottom="bottom",l.Center="center",l.Scale="scale",l.Top="top",l.TopBottom="topbottom",l))(c||{}),T=(l=>(l.Contain="contain",l.Cover="cover",l.Fill="fill",l.Original="original",l.Tile="tile",l))(T||{}),W=(l=>(l.GET="GET",l.POST="POST",l.PUT="PUT",l))(W||{}),p=(l=>(l.Straight="straight",l))(p||{});const d={vertices:[]},M={connections:[]},O={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},20634:(X,I,t)=>{t.r(I),t.d(I,{plugin:()=>Ut});var s=t(65158),c=t(37055),T=t(24293),W=t(27310),p=t(11261),d=t(77678),M=t(89654),O=t(22680),l=t(52198),F=t(11404),j=t(56675),g=t(74848),v=t(96540),u=t(40845),i=t(52622),a=t(38761),x=t(36613),P=t(97706),m=t(83195),n=t(8066),h=t(51336),f=t(29413),B=t(30501),U=t(24182),S=t(67266),V=t(81297),H=t(16895);const k={bucketCount:30,bucketOffset:0},J={fillOpacity:80,gradientMode:i.on.None,lineWidth:1};function Y(o,e){return Math.floor(o/e)*e}function D(o,e){return Math.ceil(o/e)*e}function Z(o){return o.fields[0].type===p.PU.string?1:(0,P.h)(o.fields[1].values[0]-o.fields[0].values[0],9)}function w(o){return o.fields[0].type===p.PU.string?1:(0,P.h)(o.fields[1].values[1]-o.fields[0].values[1],9)}const G=(o,e)=>{let{min:r,max:E}=o.fields[2].config,y=new h.e,L=o.fields[0].type===p.PU.string,A=Z(o),z=w(o),K=z/A,$=z!==A,_=(R,C,N,nt,Mt,Pt)=>{let dt=R.axes[C]._space,ut=R.valToPos(R.data[0][0]+A,"x")-R.valToPos(R.data[0][0],"x"),ft=Y(r??R.data[0][0],A),At=D(E??R.data[0][R.data[0].length-1]+A,A),St=[],Wt=Math.ceil(dt/ut);for(let Dt=0,Ot=ft;Ot<=At;Dt++,Ot+=A)!(Dt%Wt)&&St.push(Ot);return St};y.addScale({scaleKey:"x",isTime:!1,distribution:L?i.L4.Ordinal:$?i.L4.Log:i.L4.Linear,log:2,orientation:i.Lt.Horizontal,direction:i.ON.Right,range:$?(R,C,N)=>x.A.rangeLog(C,N*K,2,!0):(R,C,N)=>{r!=null&&(C=r),E!=null&&(N=E);let nt=R.data[0][R.data[0].length-1];return C=D(C,A),N=!L&&N===nt?N+A:Y(N,A),[C,N]}}),y.addScale({scaleKey:"y",isTime:!1,distribution:i.L4.Linear,orientation:i.Lt.Vertical,direction:i.ON.Up,softMin:0});const q=o.fields[0].display,ct=R=>(0,m.cN)(q(R));y.addAxis({scaleKey:"x",isTime:!1,placement:i.vM.Bottom,incrs:L?[1]:$?void 0:d.rW,splits:$||L?void 0:_,values:L?(R,C)=>C:(R,C)=>{const N=C.map(ct),nt=N.reduce((ut,ft)=>Math.max((0,f.kD)(ft,B.pi).width,ut),0),Pt=R.bbox.width/((nt+10)*devicePixelRatio),dt=Math.ceil(N.length/Pt);return N.map((ut,ft)=>ft%dt===0?ut:null)},theme:e});let mt=o.fields[2].display;y.addAxis({scaleKey:"y",isTime:!1,placement:i.vM.Left,formatValue:(R,C)=>(0,m.cN)(mt(R,C)),theme:e}),y.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ct=(0,H.ro)(ot(o));y.setStackingGroups(Ct);let vt=x.A.paths.bars({align:1,size:[1,1/0]}),Tt=0;for(let R=2;R<o.fields.length;R++){const C=o.fields[R];C.state=C.state??{},C.state.seriesIndex=Tt++;const N={...J,...C.config.custom},nt="y",Mt=(0,n.Qi)(C),dt=(0,n.lz)(C,e).color;y.addSeries({scaleKey:nt,lineWidth:N.lineWidth,lineColor:dt,fillOpacity:N.fillOpacity,theme:e,colorMode:Mt,pathBuilder:vt,show:!N.hideFrom?.viz,gradientMode:N.gradientMode,thresholds:C.config.thresholds,hardMin:C.config.min,hardMax:C.config.max,softMin:N.axisSoftMin,softMax:N.axisSoftMax,dataFrameFieldIndex:C.state.origin})}return y},ot=o=>({...o,fields:o.fields.filter(e=>e.name!==d.dA)}),lt=(o,e)=>{for(let r=1;r<e.fields.length;r++){let E=e.fields[r].values;for(let y=0;y<E.length;y++)E[y]===0&&(E[y]=null)}return(0,H.bq)(e,o.getStackingGroups())};class tt extends v.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e,r=!0){const{alignedFrame:E}=e,y=r?G(E,this.props.theme):this.state.config,L=ot(E),A=lt(y,L);return{alignedFrame:E,alignedData:A,config:y,xMinOnlyFrame:L}}renderLegend(e){const{legend:r}=this.props;if(!e||r.showLegend===!1)return null;const E=this.props.options.combine?[this.props.alignedFrame]:this.props.rawSeries;return(0,g.jsx)(U.$,{data:E,config:e,maxHeight:"35%",maxWidth:"60%",...r})}componentDidUpdate(e){const{structureRev:r,alignedFrame:E,bucketSize:y,bucketCount:L}=this.props;if(E!==e.alignedFrame){const A=this.state.config==null||L!==e.bucketCount||y!==e.bucketSize||this.props.options!==e.options||this.state.config===void 0||r!==e.structureRev||!r,z=this.prepState(this.props,A);this.setState(z)}}render(){const{width:e,height:r,children:E,alignedFrame:y}=this.props,{config:L}=this.state;return L?(0,g.jsx)(S.KU,{width:e,height:r,legend:this.renderLegend(L),children:(A,z)=>(0,g.jsx)(V.Z,{config:this.state.config,data:this.state.alignedData,width:A,height:z,children:E?E(L,y,this.state.xMinOnlyFrame):null})}):null}}var at=t(11389),it=t(75073),gt=t(52415),ht=t(55307),xt=t(10875),Et=t(21164),yt=t(82915);const b=({series:o,xMinOnlyFrame:e,dataIdxs:r,seriesIdx:E,mode:y=i.$N.Single,sortOrder:L=i.xB.None,isPinned:A,maxHeight:z})=>{const K=o.fields[0],$=o.fields[1],{display:_}=K.config.unit!=null?K:$,{display:q}=$.config.unit!=null?$:K,ct=(0,m.cN)(_(K.values[r[0]])),pt=(0,m.cN)(q($.values[r[1]])),mt=K.config.custom?.hideFrom?.tooltip?null:{label:"Bucket",value:`${ct} - ${pt}`},Ct=(0,v.useMemo)(()=>(0,xt.cp)(e.fields,K,r,E,y,L),[e.fields,K,r,E,y,L]);let vt;if(A&&E!=null){const Tt=o.fields[E],R=r[E],C=(0,Et.u)(Tt,R);vt=(0,g.jsx)(it.S,{dataLinks:C})}return(0,g.jsxs)(ht.i,{children:[mt!=null&&(0,g.jsx)(gt.A,{item:mt,isPinned:A}),(0,g.jsx)(at.o,{items:Ct,isPinned:A,scrollable:(0,yt.T5)({mode:y,maxHeight:z}),maxHeight:z}),vt]})},et=({data:o,options:e,width:r,height:E})=>{const y=(0,u.$j)(),L=(0,v.useMemo)(()=>{if(!o.series.length)return;if(o.series.forEach((K,$)=>{K.fields.forEach((_,q)=>{_.state={..._.state,origin:{frameIndex:$,fieldIndex:q}}})}),o.series.length===1){const K=(0,d.ix)(o.series[0]);if(K)return(0,d.cg)(K)}const z=(0,d.p3)(o.series,e);if(z)return(0,d.cg)(z,y)},[o.series,e,y]);if(!L||!L.fields.length)return(0,g.jsx)("div",{className:"panel-empty",children:(0,g.jsx)("p",{children:"No histogram found in response"})});const A=Z(L);return(0,g.jsx)(tt,{options:e,theme:y,legend:e.legend,rawSeries:o.series,structureRev:o.structureRev,width:r,height:E,alignedFrame:L,bucketSize:A,bucketCount:e.bucketCount,children:(z,K,$)=>(0,g.jsx)(g.Fragment,{children:e.tooltip.mode!==i.$N.None&&(0,g.jsx)(a.xl,{config:z,hoverMode:e.tooltip.mode===i.$N.Single?a.b3.xOne:a.b3.xAll,render:(_,q,ct,pt=!1)=>(0,g.jsx)(b,{series:L,xMinOnlyFrame:$,dataIdxs:q,seriesIdx:ct,mode:e.tooltip.mode,sortOrder:e.tooltip.sort,isPinned:pt,maxHeight:e.tooltip.maxHeight}),maxWidth:e.tooltip.maxWidth})})})},Q={stacking:{mode:i.gs.None,group:"A"}};var rt=t(2543);const Lt=(o,e,r,E)=>{if(e==="graph"&&r.angular.xaxis?.mode==="histogram"){const{fieldConfig:L,options:A}=Rt({...r.angular,fieldConfig:E});return o.fieldConfig=L,A}return{}};function Rt(o){let e={};const r={legend:{displayMode:i.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:i.$N.Single,sort:i.xB.None},combine:!1};return o.stack&&(e.stacking={mode:o.percentage?i.gs.Percent:i.gs.Normal,group:Q.stacking.group},r.combine=!1),{fieldConfig:{defaults:(0,rt.omitBy)({custom:e},rt.isNil),overrides:[]},options:r}}function st(o){if(o?.length!==1)return!1;const e=o[0];if(e.fields.length<3||!(0,d.NX)(e.fields[0].name)||!(0,d.H1)(e.fields[1].name))return!1;for(const r of e.fields)if(r.type!==p.PU.number)return!1;return!0}const Ut=new s.m(et).setPanelChangeHandler(Lt).setPanelOptions(o=>{o.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,r)=>st(r)}).addNumberInput({path:"bucketCount",name:d.Rt.bucketCount.name,description:d.Rt.bucketCount.description,settings:{placeholder:`Default: ${k.bucketCount}`,min:0},showIf:(e,r)=>!st(r)}).addNumberInput({path:"bucketSize",name:d.Rt.bucketSize.name,description:d.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:k.bucketSize,showIf:(e,r)=>!st(r)}).addNumberInput({path:"bucketOffset",name:d.Rt.bucketOffset.name,description:d.Rt.bucketOffset.description,settings:{placeholder:`Default: ${k.bucketOffset}`,min:0},showIf:(e,r)=>!st(r)}).addBooleanSwitch({path:"combine",name:d.Rt.combine.name,description:d.Rt.combine.description,defaultValue:k.combine,showIf:(e,r)=>!st(r)}),M.D(o),O.H(o)}).useFieldConfig({standardOptions:{[c.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:T.Y.PaletteClassic}}},useCustomConfig:o=>{const e=J;o.addCustomEditor({id:"stacking",path:"stacking",name:"Stacking",category:["Histogram"],defaultValue:Q.stacking,editor:j.m,override:j.m,settings:{options:l.t.stacking},process:W.hS,shouldApply:r=>r.type===p.PU.number,showIf:(r,E)=>!st(E)}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:l.t.fillGradient[0].value,settings:{options:l.t.fillGradient}}),F.e(o)}})},21164:(X,I,t)=>{t.d(I,{O:()=>W,u:()=>T});var s=t(32264),c=t(81530);const T=(p,d)=>{const M=[];if((p.config.links?.length??0)>0&&p.getLinks!=null){const O=p.values[d],l=p.display?p.display(O):{text:`${O}`,numeric:+O},F=new Set;p.getLinks({calculatedValue:l,valueRowIndex:d}).forEach(j=>{const g=`${j.title}/${j.href}`;F.has(g)||(M.push(j),F.add(g))})}return M},W=(p,d,M)=>{if(!s.$.featureToggles?.vizActions)return[];const O=[],l=new Set;return(0,c.k)(p,d,d.state.scopedVars,M,d.config.actions??[],{}).forEach(j=>{const g=`${j.title}`;l.has(g)||(O.push(j),l.add(g))}),O}},82915:(X,I,t)=>{t.d(I,{B_:()=>j,Fg:()=>u,O2:()=>v,T5:()=>i});var s=t(11261),c=t(28240),T=t(83195),W=t(57875),p=t(50311),d=t(46294),M=t(39624),O=t(52622),l=t(55129);function F(a){let x=new Map;return a.map(m=>({...m,fields:m.fields.map(n=>{if(n.type===s.PU.enum){let h=(0,l.M)(n.config,n.type),f=x.get(h);f||(f=[],x.set(h,f));let B=n.values.toArray().slice(),U=n.config.type.enum.text;if(f.length>0)for(let S=0;S<B.length;S++)B[S]+=f.length;return f.push(...U),n.config.type.enum.text=f,{...n,values:B}}return n})}))}function j(a,x,P,m){if(!a?.length)return null;(0,c.Fm)(a);let n=m!=null;m!=null&&m>0&&(a=[{...a[0],fields:[a[0].fields[m],...a[0].fields.filter((U,S)=>S!==m)]}]);for(let U of a)for(let S of U.fields)S.type===s.PU.time&&typeof S.values[0]!="number"&&(S.values=(0,p.s7)(S,{destinationType:s.PU.time}).values);let h=0;t:for(let U of a)for(let S of U.fields)if(S.type===s.PU.enum&&++h>1){a=F(a);break t}let f;const B=[];for(let U of a){const S=[];let V=!1,H=!1,k=n?U:(0,d.M)({frame:U,refFieldPseudoMin:P?.from.valueOf(),refFieldPseudoMax:P?.to.valueOf()});const J=(0,M.C)(k).fields;for(let Y=0;Y<J?.length;Y++){const D=J[Y];switch(D.type){case s.PU.time:V=!0,S.push(D);break;case s.PU.number:H=n?Y>0:!0,f={...D,values:D.values.map(G=>Number.isFinite(G)||G==null?G:null)},S.push(f);break;case s.PU.enum:H=!0;case s.PU.string:f={...D,values:D.values},S.push(f);break;case s.PU.boolean:H=!0;const Z=D.config?.custom??{},w={...D.config,max:1,min:0,custom:Z};Z.lineInterpolation!==O.dx.StepBefore&&(Z.lineInterpolation=O.dx.StepAfter),f={...D,config:w,type:s.PU.number,values:D.values.map(G=>G==null?G:G?1:0)},(0,T.j9)(w.unit)||(w.unit="bool",f.display=(0,W.J)({field:f,theme:x})),S.push(f);break}}(n||V)&&H&&B.push({...U,length:k.length,fields:S})}return B.length?(v(B,x,0),g(B,x),B):null}const g=(a,x)=>{const{palette:P}=x.visualization;for(const m of a)for(const n of m.fields)if(n.type===s.PU.enum){const h=P[n.state?.seriesIndex%P.length],f=x.visualization.getColorByName(h),B=n.config.type.enum;B.color=Array(B.text.length).fill(f),n.display=(0,W.J)({field:n,theme:x})}},v=(a,x,P)=>{let m=0;a.forEach(n=>{n.fields.forEach((h,f)=>{f!==P&&(h.type===s.PU.number||h.type===s.PU.boolean||h.type===s.PU.enum)&&(h.state={...h.state,seriesIndex:m++},h.display=(0,W.J)({field:h,theme:x}))})})};function u(a,x){return!a||!a.length?[x]:a.map(P=>P?.length?P:x)}const i=a=>a.mode===O.$N.Multi&&a.maxHeight!=null}}]);

//# sourceMappingURL=histogramPanel.1258ce18644e6c800709.js.map